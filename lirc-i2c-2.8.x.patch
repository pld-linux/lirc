--- drivers/lirc_i2c/lirc_i2c.c.~1.23.~	2004-05-23 13:36:34.000000000 +0200
+++ drivers/lirc_i2c/lirc_i2c.c	2004-05-27 15:07:05.000000000 +0200
@@ -260,32 +260,12 @@
 
 static int set_use_inc(void* data)
 {
-	struct IR *ir = data;
-
-	/* lock bttv in memory while /dev/lirc is in use  */
-	/* this is completely broken code. lirc_unregister_plugin()
-	   must be possible even when the device is open */
-#ifdef KERNEL_2_5
-	i2c_use_client(&ir->c);
-#else
-	if (ir->c.adapter->inc_use) 
-		ir->c.adapter->inc_use(ir->c.adapter);
-#endif
-
 	MOD_INC_USE_COUNT;
 	return 0;
 }
 
 static void set_use_dec(void* data)
 {
-	struct IR *ir = data;
-
-#ifdef KERNEL_2_5
-	i2c_release_client(&ir->c);
-#else
-	if (ir->c.adapter->dec_use) 
-		ir->c.adapter->dec_use(ir->c.adapter);
-#endif
 	MOD_DEC_USE_COUNT;
 }
 
@@ -386,12 +366,6 @@
 	/* register device */
 	i2c_attach_client(&ir->c);
 	ir->l.minor = lirc_register_plugin(&ir->l);
-#ifdef KERNEL_2_5
-	i2c_use_client(&ir->c);
-#else
-	if (ir->c.adapter->inc_use) 
-		ir->c.adapter->inc_use(ir->c.adapter);
-#endif
 	
 	return 0;
 }
@@ -405,12 +379,6 @@
 #endif
 	
 	/* unregister device */
-#ifdef KERNEL_2_5
-	i2c_release_client(&ir->c);
-#else
-	if (ir->c.adapter->dec_use) 
-		ir->c.adapter->dec_use(ir->c.adapter);
-#endif
 	lirc_unregister_plugin(ir->l.minor);
 	i2c_detach_client(&ir->c);
 
